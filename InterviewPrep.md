# Подготовка к интервью

Типичное интервью состоит из трех разделов:
- [CODING](#CODING)
- [SYSTEM DESIGN](#SYSTEM%20DESIGN)
- [BEHAVIORAL](#BEHAVIORAL)

Каждый этап имеет свои цели и нюансы подготовки.

## CODING

__Цель__ пройти отсев по интеллектуальному уровню. К счастью, отсутствие способностей можно компенсировать упорством.

Начать рекомендую с решения задач по темам. Мне понравился раздел c [ACMP](https://acmp.ru/)
[Решение олимпиадных задач](https://acmp.ru/asp/do/index.asp?main=course&id_course=2).

К сожалению это не курс, а просто хорошая подборка. Так что теорию надо читать где-то отдельно. Если застрял, то разбор
почти всего сайта ACMP есть у [Федора Меньшикова](https://www.youtube.com/channel/UCM01TVLxMvqEXq4Z9AFl-jA) прям на ютубе.
Я прошел весь раздел и если что у меня тоже можно подсмотреть на [GitHub](https://github.com/deniskokarev/practice/tree/master/c/acmp)

Сайт [ACMP](https://acmp.ru/) любительский, так что надо смириться с интерфейсом и "фичами". Самая главная из которых —
тебе не скажут на каком наборе данных ломается решение. Так делают на соревнованиях, но тут режим "хардкор" включен всегда.
Надо сказать, дисциплинирует.

Из этой подборки можно с чистой совестью пропустить "Длинная арифметика" и "Вычислительная геометрия".

Темы "Целочисленная арифметика" и "Комбинаторика" не нужны для интервью, но будут обязательны для участия в соревнованиях
даже самого начального уровня. Все остальные темы обязательны к изучению. После того как есть понимание базовых вещей можно
переходить на любые другие ресурсы.

Еще раз по темам можно пройтись на [HackerRank](https://www.hackerrank.com). Тут тоже сразу не раскрывают на каком наборе
входных данных ломается, но можно "купить" тест на заработанные баллы:

- [Problem Solving](https://www.hackerrank.com/domains/algorithms)
- [Interview Preparation Kit](https://www.hackerrank.com/interview/interview-preparation-kit)

HackerRank рекомендует [Project Euler](https://projecteuler.net/), но это уже чрезмерный уклон в математику.

Для кодовой части интервью самый полезный сайт [LeetCode](https://leetcode.com). В режиме практики показывают на каком тесте
ломается решение. Так же есть фильтр задач по темам.

Почти все доступно бесплатно, но подписка открывает доп задачки и некоторые авторские решения. Пожалуй имеет смысл, но я
не платил. В дискуссиях на форуме и так есть все решения с объяснениями.

Для решения вразнобой настоятельно рекомендую делать "задачи дня". Вот за [Июль 2021](https://leetcode.com/explore/challenge/card/july-leetcoding-challenge-2021).
Рекомендую пройти за все предыдущие месяцы. Это удачная подборка ключевых задач покрывающих важные темы и при этом имеющие
компактное и элегантное решение.

Народ не парится и 90% задач на интервью мне были знакомы. Причем после тысчонки задач не приходится кривить душой
о том решал-ли я это раньше. Я реально не помню, просто сразу знаю откуда начать.

Когда успешно сделал __обязательно почитай официальный разбор и форум__. Посмотри код у других (доступно если ткнуть на график
статистики на страничке "Accepted") Иногда я даже не ожидал настолько элегантного подхода. Если не решил - тем более читай
форум до просветления.

Нужно участвовать в соревнованиях — начать с виртуальных, потом в реальном времени, ибо на интервью писать придется на время.
Еженедельные на [LeetCode](https://leetcode.com/contest/) проходят неудобно, поздно вечером в субботу по Нью-Йорку. Но раз
в две-недели идет по утрам в воскресенье. 

Параллельно рекомендую [CodeForces](https://codeforces.com/). Это уже чисто соревновательная тема, где недостаточно быть
хорошо подготовленным, надо быть еще и умным :-) Уровень Div 3 примерно соответствует Литкоду. Есть огромный архив по темам
и уровню в виде численного рейтинга, типа шахматного. При решении в офлайне так же показывает на каком примере ломается,
но с ограничением в ~1000 символов. Среди прошлых [раундов](https://codeforces.com/contests) советую поискать "Educational",
например [1535](https://codeforces.com/contest/1535).

Вопросов типа codeforces на интервью не будет, но они стимулируют мозг не просто выдать заученное решение, а именно решить.
Т.е. найти логическую цепочку и размотать незнакомую задачу. У меня получалось откровенно слабо, но я считаю что мучился
не зря. На интервью будут и незнакомые задачки.

К тому же участие в соревнованиях приносит необходимый элемент азарта в скучную подготовку!

__ВАЖНО__ что в отличие от соревнований, где простое O(n*log(n)) решение всегда бьет сложное O(n), на интервью большинство задач
изначально предполагает несколько подходов и/или имеет двойное дно. Поэтому нельзя сразу останавливаться — надо обязательно
посмотреть где еще можно дожать по производительности, памяти, можно-ли сделать за один проход вместо двух или упростить код.

На интервью могут попадаться и заведомо нерешаемые или НП-полные задачки - в таком случае надо просто барахтаться и предлагать
хоть что-то. Неплохой вариант жадный алгоритм.

*Например, меня спрашивали задачу [оптимизации нагрузки](https://en.wikipedia.org/wiki/Bin_packing_problem) которая относится
к НП-сложным, причем интервьюер, то-ли был не в курсе, то-ли искусно притворялся. Жадный подход был засчитан.*

*Однажды вообще посадили вопросом на построение [последовательности де Брёйна](https://en.wikipedia.org/wiki/De_Bruijn_sequence).
Догадаться не реально, но с помощью жадного обхода можно было сгенерировать не совсем уж плохое решение.*


Из известных соревновательных есть еще TopCoder, но он заметно уступает CodeForces по всем параметрам.

Итого:
- [ACMP](https://acmp.ru/) - по темам курса  [Решение олимпиадных задач](https://acmp.ru/asp/do/index.asp?main=course&id_course=2)
- [HackerRank](https://www.hackerrank.com) - по темам "Problem Solving" и "Interview Preparation Kit"
- [LeetCode](https://leetcode.com/contest/) - "daily challenge"+вразнобой+соревнования
- [CodeForces](https://codeforces.com) - вразнобой+соревнования

Не советую:
- topcoder.com
- projecteuler.com

### Теория:
- Гуглишь по мере прохождения. Смотреть лекции, например [ИТМО](http://neerc.ifmo.ru/wiki/index.php), и обычную википедию.
  Можно ознакомиться с [e-maxx.ru](http://e-maxx.ru/), но там местами есть баги и вообще на код без слез не взглянешь 
- [Introduction To Algorithms](https://www.amazon.com/Introduction-Algorithms-3rd-MIT-Press/dp/0262033844) -
  далеко не всеобъемлющий, хотя и фундаментальный труд, где можно читать отдельные главы
- [Cracking Coding Interview](https://www.amazon.com/Cracking-Coding-Interview-Programming-Questions/dp/0984782850) -
  введение в сам процесс интервью
- [Elements of Programming Interviews](https://www.amazon.com/Adnan-Aziz-Elements-Programming-Interviews/dp/B00N4EILJQ) -
  проверить себя и порешать задачки со звездочкой на доске

*Решать на доске это вообще отдельный вид спорта и я был просто счастлив, что на виртуально-очных интервью можно было просто
печатать в редакторе. Если такой возможности не будет надо обязательно тренироваться писать на доске. Можно прям себе доску
купить.*

### Репетиторство:
На каком-то этапе можно пообщаться с [Федором](https://vk.com/fyodor_menshikov) - он как раз специализируется на алгоритмической
теме. Я с ним немного занимался. С одной стороны хотелось материально отблагодарить за все сотни видео с разборами, с другой
дисциплинировать себя. Все-таки деньги платишь, значит надо заниматься. Основное преимущество индивидуально подобранные задачки.

## SYSTEM DESIGN

__Цель__ не сконструировать рабочую систему, а показать что ты в тренде и умеешь общаться на одном языке. Лет 20 назад
для этого спрашивали `UML` и прочие Паттерны Дизайна. Для успешного прохождения нужно уметь рассуждать вслух и постоянно
объяснять компромиссы между тем или иным подходом.

Нужно отнестись со всей ответственностью к этому разделу. Кое-какое понимание пришло после нескольких ресурсов, mock-интервью
с друзьями, ну и реальных интервью.

Помогло что знал на уровне выше среднего:

- Цикл разработки и деплоя: `git`, `Jira`+`Bitbucket`, `gtest`, `JUnit`, `RPM` repo, `Ansible`, `Chef`, `Jenkins`
- Веб
  - Путь от броузера до серверного кода и обратно
  - Балансировка/сервисное обслуживание
  - Безопасность
  - Знать о CDN
- Реляционные БД: `MySQL`,
- Блоб хранилища: `S3`, `Ceph`,
- Потоковая обработка: `Kafka`,
- Мониторинг и использование time-series DBs: `Prometheus`, `AlertManager`, `Grafana`,
  - __NB__: парсинг логов не является практичным способом мониторинга
  - __NNB__: как и SNMP traps
- Облачные технологии и виртуализация: `OpenStack`, `EC2`,
- Design Patterns - владеть основной терминологией: `Singleton`, `Factory`, `Visitor`, `Adapter`,

Помогло что имел представление о распределенных системах:

- Транзакции в распределенных системах: CAP-теорема, проблема ~~курица или яйцо~~ двух генералов
- Распределенный кэш: `Redis`, `Memcached`,
- Консенсус: `Zookeeper`,
- Не реляционные БД: `Hive`,

Мне на интервью не пригодилось, но настоятельно советую знать:

- Многопоточная обработка на одном сервере: `std::thread`, `std::condition_variable`, POSIX `IPC`,
- Атомарные операции и `lock-free` алгоритмы/структуры данных. Надо знать что нет общего решения и все базируются на принципе
  атомарного изменения одного последнего указателя. Даже стандартный С++20 не может похвастать `lock-free` библиотекой.
  По-прежнему есть только базовый `std::atomic` для скалярных типов. Поэтому можно знакомится с `java.util.concurrent.atomic.*`, `java.util.concurrent.ConcurrentSkipListMap`,
- Сетевые технологии: `TCP/IP` routing, `DNS`, `Keepalived`, `HAProxy`,


### Ресурсы:
- [Grokking the System Design Interview](https://www.educative.io/courses/grokking-the-system-design-interview) - платный курс
- [Designing Data-Intensive Applications](https://www.amazon.com/Designing-Data-Intensive-Applications-Reliable-Maintainable/dp/1449373321) - хорошая книга
- [System Design Interview](https://www.amazon.com/System-Design-Interview-insiders-Second/dp/B08CMF2CQF) - книга с примерами и разборами
- [Distributed Systems](https://www.youtube.com/channel/UC-X5TC3ir8_8pi0ElvVXnFQ) - короткие ютуб презентации

Несмотря на то, что я довольно плотно знаком с большинством из упомянутых тем, это не гарантировало успешного прохождения
интервью. Нельзя объять необъятное и надо придерживаться временных рамок. Все интервью должно занять ~45мин. Исходя из
этого я сделал примерно такой план:

### 10-15 мин обсудить Minimal Viable Product:
- Функциональные требования в виде Use-Cases, включая GUI
- Масштаб: library, single node app, distributed app
- Интерфейс с другими системами
- Отказоустойчивость: что выбираем из CAP
- Мониторинг
- Monetization: как планируем зарабатывать — может иметь отпечаток на архитектуре 
- Authentication & Authorization, Encryption - где и как храним соответствующие атрибуты
- Есть-ли какие-то другие технические рамки: язык, БД,

__ВАЖНО__ самому задавать тон дискуссии и уточнять отдельные вопросы

### 5-10 мин обсудить размеры задачи чтобы удалось прикинуть сколько нужно
- CPU
- Дискового пространства
- Пропускной способности сети
  
  *Для этого неплохо примерно знать размер средней веб странички, картинки, видео, объем/скорость современных дисков, скорость
  сетевых адаптеров, количество ядер CPU* 

### 10-15 мин High-Level Design
- Какую GUI технологию используем
- Какую БД берем и что там храним. Например:
  - ... `Redis` хранит metadata
  - ... `S3` хранит блобы
  - ... видео будут на `CDN`
- Data Flow. Например:
  - ... внешний интерфейс `REST`
  - ... между нодами `Kafka`
  - ... конфигурация кластера `Zookeeper`
- Основной алгоритм обработки. Например:
  - ... наш веб-робот будет использовать BFS обход сайта
- Отказоустойчивость и сервисное обслуживание. Например:
  - ... мы выбрали компоненты поддерживающие отказоустойчивость "из коробки" так что у нас автоматически получилась
  полностью отказоустойчивая система и мы можем в любое время отключить один сервер
- Мониторинг, например:
  - ... используем SNMP агенты собирающие метрики на узлах и центральный `Zabbix`
- __ЗАКОНЧИТЬ__ выводами о потенциально-узких местах и прикинуть пределы масштабирования

__ВАЖНО__ по ходу повествования пояснять преимущества/недостатки того или иного подхода. Например:
- ... берем `MySQL` вместо `Postgres` так как в архитектуре не предвидится сложных транзакций
- ... вообще-то можно взять и `Redis`, но `MySQL` на таких объемах тоже потянет и при этом является более проработанной платформой
- ... будем делать BFS обход графа так как не надо заботиться о глубине стека
- ... исходя из стандартного интерфейса в 10Gbps нам удастся поддерживать до 10k пользователей на ноду. Масштабирование
  будет линейным.

### 10 мин оставить на Deep-Dive
Предложить окунуться в детали любого компонента. Рекомендую самому предложить область где наиболее комфортно себя чувствуешь



## BEHAVIORAL

__Цель__ показать себя высоко мотивированным сотрудником, не отрывающимся от коллектива и готового принять чужую точку
зрения. К тому же должно сложиться впечатление, что можешь иметь дело с нечетко поставленными задачами.

Не менее важно чем Coding и System Design. Это тот раздел где можно ожидать максимальной отдачи от рекрутера. Нужно будет
попросить материалы и даже провести маленькое mock-интервью.

Самые замороченные требования в Амазоне, поэтому рекомендую взять его за основу для подготовки. Для этого надо ответить на
все [14 LP](https://www.amazon.jobs/en/principles) вопросов подставив ответы составленные из своих проектов, желательно свежих.
Для Амазона надо приготовить аж по два ответа на каждый принцип. Некоторые пункты, попрошу заметить, взаимоисключающие и
это тоже надо подчеркивать по ходу ответа.

Ответы подготовить в соответствие с [STAR](https://en.wikipedia.org/wiki/Situation,_task,_action,_result)

"Почему вы хотите работать в нашей компании?" - никакая не шутка и надо быть готовым бодро ответить про совпадение
точек зрения по всем аспектам: "Mission", "Core Values" и "Engineering Culture".

При ответе нельзя "забивать эфир" пустой болтовней пока размышляешь как лучше ответить, но и зависать на несколько секунд
нельзя. Можно, например, работать над уточнением вопроса.

Обязательно подготовить несколько неудач. Допустимой неудачей может считаться грязный код в угоду скорости. Все неудачи
должны иметь выводы и уроки на будущее.

Иметь в запасе несколько социальных конфликтов от "как убедил других в своей правоте", до "признал свою ошибку".
Все так же с выводами.

Иметь ответ на "что вас не устраивает на текущем месте работы". Чувствую мой ответ о чехарде среди начальства
вызвал понимание.

Твое резюме никто читать не будет и если напрямую не спросят, то по ходу беседы надо как-то искусно упомянуть крупные успехи.
Успехов надо заготовить несколько. И больших "impacts", и локальных оптимизаций кода.

### Наблюдения

Даже при плохой игре обязательно должна быть хорошая мина. Если чувствуешь что недостаточно хорошо ответил на какой-то
вопрос не надо извиняться и вообще не надо заострять на этом внимание.

В конце каждого интервью предложат задавать вопросы. Отмолчаться — плохая идея. Нужно спросить хоть что-то. Хоть про стек
разработки, хоть про SCRUM. Сделай вид, что серьезно заинтересован в позиции и ищешь проблемные места.

Если во время онлайн-кодинга есть возможность реально запустить программу, но тебя об этом не просят, то не надо выеживаться -
может не сработать :-(

Польза была только от рекрутеров работающих в самих компаниях. Если пишет фриланс-рекрутер, общаться с такими пустая трата
времени.

Никогда не раскрывай сколько получаешь и никогда первым не называй ожидаемую зарплату. Пусть сделают лучшее предложение от
которого уже можно отталкиваться. Между тем зарплаты известны довольно точно на [levels.fyi](https://www.levels.fyi).
Не смотри на glassdoor
